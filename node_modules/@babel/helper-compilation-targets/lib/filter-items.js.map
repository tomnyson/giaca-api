{"version":3,"sources":["../../../../../node_modules/@babel/helper-compilation-targets/lib/filter-items.js"],"names":["Object","value","exports","_semver","require","_plugins","_utils","targetEnvironments","unsupportedEnvironments","environment","lowestImplementedVersion","lowestTargetedVersion","target","compatData","excludes","includes","targetsSupported","result","options","isRequired","shippedProposalsSyntax","pluginSyntaxMap","defaultIncludes","item","defaultExcludes"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.targetsSupported = targetsSupported;\nexports.isRequired = isRequired;\nexports.default = filterItems;\n\nvar _semver = require(\"semver\");\n\nvar _plugins = require(\"@babel/compat-data/plugins\");\n\nvar _utils = require(\"./utils\");\n\nfunction targetsSupported(target, support) {\n  const targetEnvironments = Object.keys(target);\n\n  if (targetEnvironments.length === 0) {\n    return false;\n  }\n\n  const unsupportedEnvironments = targetEnvironments.filter(environment => {\n    const lowestImplementedVersion = (0, _utils.getLowestImplementedVersion)(support, environment);\n\n    if (!lowestImplementedVersion) {\n      return true;\n    }\n\n    const lowestTargetedVersion = target[environment];\n\n    if ((0, _utils.isUnreleasedVersion)(lowestTargetedVersion, environment)) {\n      return false;\n    }\n\n    if ((0, _utils.isUnreleasedVersion)(lowestImplementedVersion, environment)) {\n      return true;\n    }\n\n    if (!_semver.valid(lowestTargetedVersion.toString())) {\n      throw new Error(`Invalid version passed for target \"${environment}\": \"${lowestTargetedVersion}\". ` + \"Versions must be in semver format (major.minor.patch)\");\n    }\n\n    return _semver.gt((0, _utils.semverify)(lowestImplementedVersion), lowestTargetedVersion.toString());\n  });\n  return unsupportedEnvironments.length === 0;\n}\n\nfunction isRequired(name, targets, {\n  compatData = _plugins,\n  includes,\n  excludes\n} = {}) {\n  if (excludes != null && excludes.has(name)) return false;\n  if (includes != null && includes.has(name)) return true;\n  return !targetsSupported(targets, compatData[name]);\n}\n\nfunction filterItems(list, includes, excludes, targets, defaultIncludes, defaultExcludes, pluginSyntaxMap) {\n  const result = new Set();\n  const options = {\n    compatData: list,\n    includes,\n    excludes\n  };\n\n  for (const item in list) {\n    if (isRequired(item, targets, options)) {\n      result.add(item);\n    } else if (pluginSyntaxMap) {\n      const shippedProposalsSyntax = pluginSyntaxMap.get(item);\n\n      if (shippedProposalsSyntax) {\n        result.add(shippedProposalsSyntax);\n      }\n    }\n  }\n\n  if (defaultIncludes) {\n    defaultIncludes.forEach(item => !excludes.has(item) && result.add(item));\n  }\n\n  if (defaultExcludes) {\n    defaultExcludes.forEach(item => !includes.has(item) && result.delete(item));\n  }\n\n  return result;\n}"],"file":"filter-items.js"}