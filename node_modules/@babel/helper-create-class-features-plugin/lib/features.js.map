{"version":3,"sources":["../../../../../node_modules/@babel/helper-create-class-features-plugin/lib/features.js"],"names":["Object","value","exports","_decorators","require","FEATURES","fields","privateMethods","decorators","privateIn","staticBlocks","featuresSameLoose","featuresKey","looseKey","looseLowPriorityKey","hasFeature","canIgnoreLoose","file","loose","setLoose","isLoose","resolvedLoose","higherPriorityPluginName","console","name","path","operator","left","node"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.enableFeature = enableFeature;\nexports.isLoose = isLoose;\nexports.verifyUsedFeatures = verifyUsedFeatures;\nexports.FEATURES = void 0;\n\nvar _decorators = require(\"./decorators\");\n\nconst FEATURES = Object.freeze({\n  fields: 1 << 1,\n  privateMethods: 1 << 2,\n  decorators: 1 << 3,\n  privateIn: 1 << 4,\n  staticBlocks: 1 << 5\n});\nexports.FEATURES = FEATURES;\nconst featuresSameLoose = new Map([[FEATURES.fields, \"@babel/plugin-proposal-class-properties\"], [FEATURES.privateMethods, \"@babel/plugin-proposal-private-methods\"], [FEATURES.privateIn, \"@babel/plugin-proposal-private-property-in-object\"]]);\nconst featuresKey = \"@babel/plugin-class-features/featuresKey\";\nconst looseKey = \"@babel/plugin-class-features/looseKey\";\nconst looseLowPriorityKey = \"@babel/plugin-class-features/looseLowPriorityKey/#__internal__@babel/preset-env__please-overwrite-loose-instead-of-throwing\";\n\nfunction enableFeature(file, feature, loose) {\n  if (!hasFeature(file, feature) || canIgnoreLoose(file, feature)) {\n    file.set(featuresKey, file.get(featuresKey) | feature);\n\n    if (loose === \"#__internal__@babel/preset-env__prefer-true-but-false-is-ok-if-it-prevents-an-error\") {\n      setLoose(file, feature, true);\n      file.set(looseLowPriorityKey, file.get(looseLowPriorityKey) | feature);\n    } else if (loose === \"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\") {\n      setLoose(file, feature, false);\n      file.set(looseLowPriorityKey, file.get(looseLowPriorityKey) | feature);\n    } else {\n      setLoose(file, feature, loose);\n    }\n  }\n\n  let resolvedLoose;\n  let higherPriorityPluginName;\n\n  for (const [mask, name] of featuresSameLoose) {\n    if (!hasFeature(file, mask)) continue;\n    const loose = isLoose(file, mask);\n\n    if (canIgnoreLoose(file, mask)) {\n      continue;\n    } else if (resolvedLoose === !loose) {\n      throw new Error(\"'loose' mode configuration must be the same for @babel/plugin-proposal-class-properties, \" + \"@babel/plugin-proposal-private-methods and \" + \"@babel/plugin-proposal-private-property-in-object (when they are enabled).\");\n    } else {\n      resolvedLoose = loose;\n      higherPriorityPluginName = name;\n    }\n  }\n\n  if (resolvedLoose !== undefined) {\n    for (const [mask, name] of featuresSameLoose) {\n      if (hasFeature(file, mask) && isLoose(file, mask) !== resolvedLoose) {\n        setLoose(file, mask, resolvedLoose);\n        console.warn(`Though the \"loose\" option was set to \"${!resolvedLoose}\" in your @babel/preset-env ` + `config, it will not be used for ${name} since the \"loose\" mode option was set to ` + `\"${resolvedLoose}\" for ${higherPriorityPluginName}.\\nThe \"loose\" option must be the ` + `same for @babel/plugin-proposal-class-properties, @babel/plugin-proposal-private-methods ` + `and @babel/plugin-proposal-private-property-in-object (when they are enabled): you can ` + `silence this warning by explicitly adding\\n` + `\\t[\"${name}\", { \"loose\": ${resolvedLoose} }]\\n` + `to the \"plugins\" section of your Babel config.`);\n      }\n    }\n  }\n}\n\nfunction hasFeature(file, feature) {\n  return !!(file.get(featuresKey) & feature);\n}\n\nfunction isLoose(file, feature) {\n  return !!(file.get(looseKey) & feature);\n}\n\nfunction setLoose(file, feature, loose) {\n  if (loose) file.set(looseKey, file.get(looseKey) | feature);else file.set(looseKey, file.get(looseKey) & ~feature);\n  file.set(looseLowPriorityKey, file.get(looseLowPriorityKey) & ~feature);\n}\n\nfunction canIgnoreLoose(file, feature) {\n  return !!(file.get(looseLowPriorityKey) & feature);\n}\n\nfunction verifyUsedFeatures(path, file) {\n  if ((0, _decorators.hasOwnDecorators)(path.node)) {\n    if (!hasFeature(file, FEATURES.decorators)) {\n      throw path.buildCodeFrameError(\"Decorators are not enabled.\" + \"\\nIf you are using \" + '[\"@babel/plugin-proposal-decorators\", { \"legacy\": true }], ' + 'make sure it comes *before* \"@babel/plugin-proposal-class-properties\" ' + \"and enable loose mode, like so:\\n\" + '\\t[\"@babel/plugin-proposal-decorators\", { \"legacy\": true }]\\n' + '\\t[\"@babel/plugin-proposal-class-properties\", { \"loose\": true }]');\n    }\n\n    if (path.isPrivate()) {\n      throw path.buildCodeFrameError(`Private ${path.isClassMethod() ? \"methods\" : \"fields\"} in decorated classes are not supported yet.`);\n    }\n  }\n\n  if (path.isClassPrivateMethod != null && path.isClassPrivateMethod()) {\n    if (!hasFeature(file, FEATURES.privateMethods)) {\n      throw path.buildCodeFrameError(\"Class private methods are not enabled.\");\n    }\n  }\n\n  if (path.isPrivateName() && path.parentPath.isBinaryExpression({\n    operator: \"in\",\n    left: path.node\n  })) {\n    if (!hasFeature(file, FEATURES.privateIn)) {\n      throw path.buildCodeFrameError(\"Private property in checks are not enabled.\");\n    }\n  }\n\n  if (path.isProperty()) {\n    if (!hasFeature(file, FEATURES.fields)) {\n      throw path.buildCodeFrameError(\"Class fields are not enabled.\");\n    }\n  }\n\n  if (path.isStaticBlock != null && path.isStaticBlock()) {\n    if (!hasFeature(file, FEATURES.staticBlocks)) {\n      throw path.buildCodeFrameError(\"Static class blocks are not enabled. \" + \"Please add `@babel/plugin-proposal-class-static-block` to your configuration.\");\n    }\n  }\n}"],"file":"features.js"}