{"version":3,"sources":["../../../../../node_modules/@babel/helper-create-class-features-plugin/lib/decorators.js"],"names":["Object","value","exports","_core","require","_helperReplaceSupers","_helperFunctionName","node","hasOwnDecorators","result","decorator","String","scope","isMethod","path","methodPath","objectRef","file","refToPreserve","classRef","properties","prop","takeDecorators","getKey","id","method","ast","err","initializeId","isDeclaration","isStrict","superClass","superId","classDecorators","definitions","elements","element","extractElementDescriptor","wrapperCall","addDecorateHelper","replacement","classPathDesc","ref","instanceNodes","wrapClass"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hasOwnDecorators = hasOwnDecorators;\nexports.hasDecorators = hasDecorators;\nexports.buildDecoratedClass = buildDecoratedClass;\n\nvar _core = require(\"@babel/core\");\n\nvar _helperReplaceSupers = require(\"@babel/helper-replace-supers\");\n\nvar _helperFunctionName = require(\"@babel/helper-function-name\");\n\nfunction hasOwnDecorators(node) {\n  return !!(node.decorators && node.decorators.length);\n}\n\nfunction hasDecorators(node) {\n  return hasOwnDecorators(node) || node.body.body.some(hasOwnDecorators);\n}\n\nfunction prop(key, value) {\n  if (!value) return null;\n  return _core.types.objectProperty(_core.types.identifier(key), value);\n}\n\nfunction method(key, body) {\n  return _core.types.objectMethod(\"method\", _core.types.identifier(key), [], _core.types.blockStatement(body));\n}\n\nfunction takeDecorators(node) {\n  let result;\n\n  if (node.decorators && node.decorators.length > 0) {\n    result = _core.types.arrayExpression(node.decorators.map(decorator => decorator.expression));\n  }\n\n  node.decorators = undefined;\n  return result;\n}\n\nfunction getKey(node) {\n  if (node.computed) {\n    return node.key;\n  } else if (_core.types.isIdentifier(node.key)) {\n    return _core.types.stringLiteral(node.key.name);\n  } else {\n    return _core.types.stringLiteral(String(node.key.value));\n  }\n}\n\nfunction extractElementDescriptor(classRef, superRef, path) {\n  const {\n    node,\n    scope\n  } = path;\n  const isMethod = path.isClassMethod();\n\n  if (path.isPrivate()) {\n    throw path.buildCodeFrameError(`Private ${isMethod ? \"methods\" : \"fields\"} in decorated classes are not supported yet.`);\n  }\n\n  new _helperReplaceSupers.default({\n    methodPath: path,\n    objectRef: classRef,\n    superRef,\n    file: this,\n    refToPreserve: classRef\n  }).replace();\n  const properties = [prop(\"kind\", _core.types.stringLiteral(_core.types.isClassMethod(node) ? node.kind : \"field\")), prop(\"decorators\", takeDecorators(node)), prop(\"static\", node.static && _core.types.booleanLiteral(true)), prop(\"key\", getKey(node))].filter(Boolean);\n\n  if (_core.types.isClassMethod(node)) {\n    const id = node.computed ? null : node.key;\n\n    _core.types.toExpression(node);\n\n    properties.push(prop(\"value\", (0, _helperFunctionName.default)({\n      node,\n      id,\n      scope\n    }) || node));\n  } else if (_core.types.isClassProperty(node) && node.value) {\n    properties.push(method(\"value\", _core.template.statements.ast`return ${node.value}`));\n  } else {\n    properties.push(prop(\"value\", scope.buildUndefinedNode()));\n  }\n\n  path.remove();\n  return _core.types.objectExpression(properties);\n}\n\nfunction addDecorateHelper(file) {\n  try {\n    return file.addHelper(\"decorate\");\n  } catch (err) {\n    if (err.code === \"BABEL_HELPER_UNKNOWN\") {\n      err.message += \"\\n  '@babel/plugin-transform-decorators' in non-legacy mode\" + \" requires '@babel/core' version ^7.0.2 and you appear to be using\" + \" an older version.\";\n    }\n\n    throw err;\n  }\n}\n\nfunction buildDecoratedClass(ref, path, elements, file) {\n  const {\n    node,\n    scope\n  } = path;\n  const initializeId = scope.generateUidIdentifier(\"initialize\");\n  const isDeclaration = node.id && path.isDeclaration();\n  const isStrict = path.isInStrictMode();\n  const {\n    superClass\n  } = node;\n  node.type = \"ClassDeclaration\";\n  if (!node.id) node.id = _core.types.cloneNode(ref);\n  let superId;\n\n  if (superClass) {\n    superId = scope.generateUidIdentifierBasedOnNode(node.superClass, \"super\");\n    node.superClass = superId;\n  }\n\n  const classDecorators = takeDecorators(node);\n\n  const definitions = _core.types.arrayExpression(elements.filter(element => !element.node.abstract).map(extractElementDescriptor.bind(file, node.id, superId)));\n\n  const wrapperCall = _core.template.expression.ast`\n    ${addDecorateHelper(file)}(\n      ${classDecorators || _core.types.nullLiteral()},\n      function (${initializeId}, ${superClass ? _core.types.cloneNode(superId) : null}) {\n        ${node}\n        return { F: ${_core.types.cloneNode(node.id)}, d: ${definitions} };\n      },\n      ${superClass}\n    )\n  `;\n\n  if (!isStrict) {\n    wrapperCall.arguments[1].body.directives.push(_core.types.directive(_core.types.directiveLiteral(\"use strict\")));\n  }\n\n  let replacement = wrapperCall;\n  let classPathDesc = \"arguments.1.body.body.0\";\n\n  if (isDeclaration) {\n    replacement = _core.template.statement.ast`let ${ref} = ${wrapperCall}`;\n    classPathDesc = \"declarations.0.init.\" + classPathDesc;\n  }\n\n  return {\n    instanceNodes: [_core.template.statement.ast`${_core.types.cloneNode(initializeId)}(this)`],\n\n    wrapClass(path) {\n      path.replaceWith(replacement);\n      return path.get(classPathDesc);\n    }\n\n  };\n}"],"file":"decorators.js"}