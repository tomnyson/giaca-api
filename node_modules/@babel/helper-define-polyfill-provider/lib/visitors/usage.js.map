{"version":3,"sources":["../../../../../../node_modules/@babel/helper-define-polyfill-provider/lib/visitors/usage.js"],"names":["exports","_utils","require","_default","callProvider","kind","placement","ReferencedIdentifier","node","name","scope","MemberExpression","key","path","object","binding","source","property","ObjectPattern","parent","parentPath","obj","grand","id","prop","BinaryExpression"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _utils = require(\"../utils\");\n\nvar _default = callProvider => {\n  function property(object, key, placement, path) {\n    return callProvider({\n      kind: \"property\",\n      object,\n      key,\n      placement\n    }, path);\n  }\n\n  return {\n    // Symbol(), new Promise\n    ReferencedIdentifier(path) {\n      const {\n        node: {\n          name\n        },\n        scope\n      } = path;\n      if (scope.getBindingIdentifier(name)) return;\n      callProvider({\n        kind: \"global\",\n        name\n      }, path);\n    },\n\n    MemberExpression(path) {\n      const key = (0, _utils.resolveKey)(path.get(\"property\"), path.node.computed);\n      if (!key || key === \"prototype\") return;\n      const object = path.get(\"object\");\n      const binding = object.scope.getBinding(object.node.name);\n      if (binding && binding.path.isImportNamespaceSpecifier()) return;\n      const source = (0, _utils.resolveSource)(object);\n      return property(source.id, key, source.placement, path);\n    },\n\n    ObjectPattern(path) {\n      const {\n        parentPath,\n        parent\n      } = path;\n      let obj; // const { keys, values } = Object\n\n      if (parentPath.isVariableDeclarator()) {\n        obj = parentPath.get(\"init\"); // ({ keys, values } = Object)\n      } else if (parentPath.isAssignmentExpression()) {\n        obj = parentPath.get(\"right\"); // !function ({ keys, values }) {...} (Object)\n        // resolution does not work after properties transform :-(\n      } else if (parentPath.isFunction()) {\n        const grand = parentPath.parentPath;\n\n        if (grand.isCallExpression() || grand.isNewExpression()) {\n          if (grand.node.callee === parent) {\n            obj = grand.get(\"arguments\")[path.key];\n          }\n        }\n      }\n\n      let id = null;\n      let placement = null;\n      if (obj) ({\n        id,\n        placement\n      } = (0, _utils.resolveSource)(obj));\n\n      for (const prop of path.get(\"properties\")) {\n        if (prop.isObjectProperty()) {\n          const key = (0, _utils.resolveKey)(prop.get(\"key\"));\n          if (key) property(id, key, placement, prop);\n        }\n      }\n    },\n\n    BinaryExpression(path) {\n      if (path.node.operator !== \"in\") return;\n      const source = (0, _utils.resolveSource)(path.get(\"right\"));\n      const key = (0, _utils.resolveKey)(path.get(\"left\"), true);\n      if (!key) return;\n      callProvider({\n        kind: \"in\",\n        object: source.id,\n        key,\n        placement: source.placement\n      }, path);\n    }\n\n  };\n};\n\nexports.default = _default;"],"file":"usage.js"}