{"version":3,"sources":["../../../../../node_modules/@babel/helper-define-polyfill-provider/lib/normalize-options.js"],"names":["exports","_utils","require","pattern","unused","original","String","duplicates","Array","name","filter","regexp","patternToRegExp","matched","current","include","unusedInclude","exclude","unusedExclude","buildUnusedError","buldDuplicatesError","missingDependencies","caller","babelApi","log","inject","all"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.validateIncludeExclude = validateIncludeExclude;\nexports.applyMissingDependenciesDefaults = applyMissingDependenciesDefaults;\n\nvar _utils = require(\"./utils\");\n\nfunction patternToRegExp(pattern) {\n  if (pattern instanceof RegExp) return pattern;\n\n  try {\n    return new RegExp(`^${pattern}$`);\n  } catch (_unused) {\n    return null;\n  }\n}\n\nfunction buildUnusedError(label, unused) {\n  if (!unused.length) return \"\";\n  return `  - The following \"${label}\" patterns didn't match any polyfill:\\n` + unused.map(original => `    ${String(original)}\\n`).join(\"\");\n}\n\nfunction buldDuplicatesError(duplicates) {\n  if (!duplicates.size) return \"\";\n  return `  - The following polyfills were matched both by \"include\" and \"exclude\" patterns:\\n` + Array.from(duplicates, name => `    ${name}\\n`).join(\"\");\n}\n\nfunction validateIncludeExclude(provider, polyfills, includePatterns, excludePatterns) {\n  let current;\n\n  const filter = pattern => {\n    const regexp = patternToRegExp(pattern);\n    if (!regexp) return false;\n    let matched = false;\n\n    for (const polyfill of polyfills) {\n      if (regexp.test(polyfill)) {\n        matched = true;\n        current.add(polyfill);\n      }\n    }\n\n    return !matched;\n  }; // prettier-ignore\n\n\n  const include = current = new Set();\n  const unusedInclude = Array.from(includePatterns).filter(filter); // prettier-ignore\n\n  const exclude = current = new Set();\n  const unusedExclude = Array.from(excludePatterns).filter(filter);\n  const duplicates = (0, _utils.intersection)(include, exclude);\n\n  if (duplicates.size > 0 || unusedInclude.length > 0 || unusedExclude.length > 0) {\n    throw new Error(`Error while validating the \"${provider}\" provider options:\\n` + buildUnusedError(\"include\", unusedInclude) + buildUnusedError(\"exclude\", unusedExclude) + buldDuplicatesError(duplicates));\n  }\n\n  return {\n    include,\n    exclude\n  };\n}\n\nfunction applyMissingDependenciesDefaults(options, babelApi) {\n  const {\n    missingDependencies = {}\n  } = options;\n  if (missingDependencies === false) return false;\n  const caller = babelApi.caller(caller => caller == null ? void 0 : caller.name);\n  const {\n    log = \"deferred\",\n    inject = caller === \"rollup-plugin-babel\" ? \"throw\" : \"import\",\n    all = false\n  } = missingDependencies;\n  return {\n    log,\n    inject,\n    all\n  };\n}"],"file":"normalize-options.js"}