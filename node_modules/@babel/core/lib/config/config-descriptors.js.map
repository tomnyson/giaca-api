{"version":3,"sources":["../../../../../../node_modules/@babel/core/lib/config/config-descriptors.js"],"names":["Object","value","exports","data","require","_gensync","_files","_item","_caching","_resolveTargets","a","b","options","passPerPreset","optionsWithResolvedBrowserslistConfigFile","plugins","createCachedPluginDescriptors","handlerOf","presets","createCachedPresetDescriptors","createPluginDescriptors","createPresetDescriptors","PRESET_DESCRIPTOR_CACHE","dirname","cache","dir","alias","descriptors","desc","loadCachedDescriptor","PLUGIN_DESCRIPTOR_CACHE","DEFAULT_OPTIONS","cacheByOptions","possibilities","matches","possibility","isEqualDescriptor","createDescriptors","createDescriptor","ownPass","assertNoDuplicates","Array","file","filepath","resolver","type","request","resolved","String","map","item","nameMap","conflicts","items","i","JSON"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createCachedDescriptors = createCachedDescriptors;\nexports.createUncachedDescriptors = createUncachedDescriptors;\nexports.createDescriptor = createDescriptor;\n\nfunction _gensync() {\n  const data = require(\"gensync\");\n\n  _gensync = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _files = require(\"./files\");\n\nvar _item = require(\"./item\");\n\nvar _caching = require(\"./caching\");\n\nvar _resolveTargets = require(\"./resolve-targets\");\n\nfunction isEqualDescriptor(a, b) {\n  return a.name === b.name && a.value === b.value && a.options === b.options && a.dirname === b.dirname && a.alias === b.alias && a.ownPass === b.ownPass && (a.file && a.file.request) === (b.file && b.file.request) && (a.file && a.file.resolved) === (b.file && b.file.resolved);\n}\n\nfunction* handlerOf(value) {\n  return value;\n}\n\nfunction optionsWithResolvedBrowserslistConfigFile(options, dirname) {\n  if (typeof options.browserslistConfigFile === \"string\") {\n    options.browserslistConfigFile = (0, _resolveTargets.resolveBrowserslistConfigFile)(options.browserslistConfigFile, dirname);\n  }\n\n  return options;\n}\n\nfunction createCachedDescriptors(dirname, options, alias) {\n  const {\n    plugins,\n    presets,\n    passPerPreset\n  } = options;\n  return {\n    options: optionsWithResolvedBrowserslistConfigFile(options, dirname),\n    plugins: plugins ? () => createCachedPluginDescriptors(plugins, dirname)(alias) : () => handlerOf([]),\n    presets: presets ? () => createCachedPresetDescriptors(presets, dirname)(alias)(!!passPerPreset) : () => handlerOf([])\n  };\n}\n\nfunction createUncachedDescriptors(dirname, options, alias) {\n  let plugins;\n  let presets;\n  return {\n    options: optionsWithResolvedBrowserslistConfigFile(options, dirname),\n\n    *plugins() {\n      if (!plugins) {\n        plugins = yield* createPluginDescriptors(options.plugins || [], dirname, alias);\n      }\n\n      return plugins;\n    },\n\n    *presets() {\n      if (!presets) {\n        presets = yield* createPresetDescriptors(options.presets || [], dirname, alias, !!options.passPerPreset);\n      }\n\n      return presets;\n    }\n\n  };\n}\n\nconst PRESET_DESCRIPTOR_CACHE = new WeakMap();\nconst createCachedPresetDescriptors = (0, _caching.makeWeakCacheSync)((items, cache) => {\n  const dirname = cache.using(dir => dir);\n  return (0, _caching.makeStrongCacheSync)(alias => (0, _caching.makeStrongCache)(function* (passPerPreset) {\n    const descriptors = yield* createPresetDescriptors(items, dirname, alias, passPerPreset);\n    return descriptors.map(desc => loadCachedDescriptor(PRESET_DESCRIPTOR_CACHE, desc));\n  }));\n});\nconst PLUGIN_DESCRIPTOR_CACHE = new WeakMap();\nconst createCachedPluginDescriptors = (0, _caching.makeWeakCacheSync)((items, cache) => {\n  const dirname = cache.using(dir => dir);\n  return (0, _caching.makeStrongCache)(function* (alias) {\n    const descriptors = yield* createPluginDescriptors(items, dirname, alias);\n    return descriptors.map(desc => loadCachedDescriptor(PLUGIN_DESCRIPTOR_CACHE, desc));\n  });\n});\nconst DEFAULT_OPTIONS = {};\n\nfunction loadCachedDescriptor(cache, desc) {\n  const {\n    value,\n    options = DEFAULT_OPTIONS\n  } = desc;\n  if (options === false) return desc;\n  let cacheByOptions = cache.get(value);\n\n  if (!cacheByOptions) {\n    cacheByOptions = new WeakMap();\n    cache.set(value, cacheByOptions);\n  }\n\n  let possibilities = cacheByOptions.get(options);\n\n  if (!possibilities) {\n    possibilities = [];\n    cacheByOptions.set(options, possibilities);\n  }\n\n  if (possibilities.indexOf(desc) === -1) {\n    const matches = possibilities.filter(possibility => isEqualDescriptor(possibility, desc));\n\n    if (matches.length > 0) {\n      return matches[0];\n    }\n\n    possibilities.push(desc);\n  }\n\n  return desc;\n}\n\nfunction* createPresetDescriptors(items, dirname, alias, passPerPreset) {\n  return yield* createDescriptors(\"preset\", items, dirname, alias, passPerPreset);\n}\n\nfunction* createPluginDescriptors(items, dirname, alias) {\n  return yield* createDescriptors(\"plugin\", items, dirname, alias);\n}\n\nfunction* createDescriptors(type, items, dirname, alias, ownPass) {\n  const descriptors = yield* _gensync().all(items.map((item, index) => createDescriptor(item, dirname, {\n    type,\n    alias: `${alias}$${index}`,\n    ownPass: !!ownPass\n  })));\n  assertNoDuplicates(descriptors);\n  return descriptors;\n}\n\nfunction* createDescriptor(pair, dirname, {\n  type,\n  alias,\n  ownPass\n}) {\n  const desc = (0, _item.getItemDescriptor)(pair);\n\n  if (desc) {\n    return desc;\n  }\n\n  let name;\n  let options;\n  let value = pair;\n\n  if (Array.isArray(value)) {\n    if (value.length === 3) {\n      [value, options, name] = value;\n    } else {\n      [value, options] = value;\n    }\n  }\n\n  let file = undefined;\n  let filepath = null;\n\n  if (typeof value === \"string\") {\n    if (typeof type !== \"string\") {\n      throw new Error(\"To resolve a string-based item, the type of item must be given\");\n    }\n\n    const resolver = type === \"plugin\" ? _files.loadPlugin : _files.loadPreset;\n    const request = value;\n    ({\n      filepath,\n      value\n    } = yield* resolver(value, dirname));\n    file = {\n      request,\n      resolved: filepath\n    };\n  }\n\n  if (!value) {\n    throw new Error(`Unexpected falsy value: ${String(value)}`);\n  }\n\n  if (typeof value === \"object\" && value.__esModule) {\n    if (value.default) {\n      value = value.default;\n    } else {\n      throw new Error(\"Must export a default export when using ES6 modules.\");\n    }\n  }\n\n  if (typeof value !== \"object\" && typeof value !== \"function\") {\n    throw new Error(`Unsupported format: ${typeof value}. Expected an object or a function.`);\n  }\n\n  if (filepath !== null && typeof value === \"object\" && value) {\n    throw new Error(`Plugin/Preset files are not allowed to export objects, only functions. In ${filepath}`);\n  }\n\n  return {\n    name,\n    alias: filepath || alias,\n    value,\n    options,\n    dirname,\n    ownPass,\n    file\n  };\n}\n\nfunction assertNoDuplicates(items) {\n  const map = new Map();\n\n  for (const item of items) {\n    if (typeof item.value !== \"function\") continue;\n    let nameMap = map.get(item.value);\n\n    if (!nameMap) {\n      nameMap = new Set();\n      map.set(item.value, nameMap);\n    }\n\n    if (nameMap.has(item.name)) {\n      const conflicts = items.filter(i => i.value === item.value);\n      throw new Error([`Duplicate plugin/preset detected.`, `If you'd like to use two separate instances of a plugin,`, `they need separate names, e.g.`, ``, `  plugins: [`, `    ['some-plugin', {}],`, `    ['some-plugin', {}, 'some unique name'],`, `  ]`, ``, `Duplicates detected are:`, `${JSON.stringify(conflicts, null, 2)}`].join(\"\\n\"));\n    }\n\n    nameMap.add(item.name);\n  }\n}"],"file":"config-descriptors.js"}