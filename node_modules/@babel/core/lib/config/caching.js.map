{"version":3,"sources":["../../../../../../node_modules/@babel/core/lib/config/caching.js"],"names":["Object","value","exports","data","require","_gensync","_async","_util","synchronize","gen","makeCachedFunction","makeWeakCache","makeStrongCache","callCacheSync","callCacheAsync","futureCache","asyncContext","callCache","cached","getCachedValueOrWait","cache","handlerResult","handler","finishLock","setupAsyncLocks","updateFunctionCache","cachedValue","valid","getCachedValue","config","genTrue","constructor","simple","makeSimpleConfigurator","mode","forever","never","using","key","fn","invalidate","validator","pairs","deactivate","configured","assertSimpleType","val","cacheFn","cb","resolve","release"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.makeWeakCache = makeWeakCache;\nexports.makeWeakCacheSync = makeWeakCacheSync;\nexports.makeStrongCache = makeStrongCache;\nexports.makeStrongCacheSync = makeStrongCacheSync;\nexports.assertSimpleType = assertSimpleType;\n\nfunction _gensync() {\n  const data = require(\"gensync\");\n\n  _gensync = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _async = require(\"../gensync-utils/async\");\n\nvar _util = require(\"./util\");\n\nconst synchronize = gen => {\n  return _gensync()(gen).sync;\n};\n\nfunction* genTrue() {\n  return true;\n}\n\nfunction makeWeakCache(handler) {\n  return makeCachedFunction(WeakMap, handler);\n}\n\nfunction makeWeakCacheSync(handler) {\n  return synchronize(makeWeakCache(handler));\n}\n\nfunction makeStrongCache(handler) {\n  return makeCachedFunction(Map, handler);\n}\n\nfunction makeStrongCacheSync(handler) {\n  return synchronize(makeStrongCache(handler));\n}\n\nfunction makeCachedFunction(CallCache, handler) {\n  const callCacheSync = new CallCache();\n  const callCacheAsync = new CallCache();\n  const futureCache = new CallCache();\n  return function* cachedFunction(arg, data) {\n    const asyncContext = yield* (0, _async.isAsync)();\n    const callCache = asyncContext ? callCacheAsync : callCacheSync;\n    const cached = yield* getCachedValueOrWait(asyncContext, callCache, futureCache, arg, data);\n    if (cached.valid) return cached.value;\n    const cache = new CacheConfigurator(data);\n    const handlerResult = handler(arg, cache);\n    let finishLock;\n    let value;\n\n    if ((0, _util.isIterableIterator)(handlerResult)) {\n      const gen = handlerResult;\n      value = yield* (0, _async.onFirstPause)(gen, () => {\n        finishLock = setupAsyncLocks(cache, futureCache, arg);\n      });\n    } else {\n      value = handlerResult;\n    }\n\n    updateFunctionCache(callCache, cache, arg, value);\n\n    if (finishLock) {\n      futureCache.delete(arg);\n      finishLock.release(value);\n    }\n\n    return value;\n  };\n}\n\nfunction* getCachedValue(cache, arg, data) {\n  const cachedValue = cache.get(arg);\n\n  if (cachedValue) {\n    for (const {\n      value,\n      valid\n    } of cachedValue) {\n      if (yield* valid(data)) return {\n        valid: true,\n        value\n      };\n    }\n  }\n\n  return {\n    valid: false,\n    value: null\n  };\n}\n\nfunction* getCachedValueOrWait(asyncContext, callCache, futureCache, arg, data) {\n  const cached = yield* getCachedValue(callCache, arg, data);\n\n  if (cached.valid) {\n    return cached;\n  }\n\n  if (asyncContext) {\n    const cached = yield* getCachedValue(futureCache, arg, data);\n\n    if (cached.valid) {\n      const value = yield* (0, _async.waitFor)(cached.value.promise);\n      return {\n        valid: true,\n        value\n      };\n    }\n  }\n\n  return {\n    valid: false,\n    value: null\n  };\n}\n\nfunction setupAsyncLocks(config, futureCache, arg) {\n  const finishLock = new Lock();\n  updateFunctionCache(futureCache, config, arg, finishLock);\n  return finishLock;\n}\n\nfunction updateFunctionCache(cache, config, arg, value) {\n  if (!config.configured()) config.forever();\n  let cachedValue = cache.get(arg);\n  config.deactivate();\n\n  switch (config.mode()) {\n    case \"forever\":\n      cachedValue = [{\n        value,\n        valid: genTrue\n      }];\n      cache.set(arg, cachedValue);\n      break;\n\n    case \"invalidate\":\n      cachedValue = [{\n        value,\n        valid: config.validator()\n      }];\n      cache.set(arg, cachedValue);\n      break;\n\n    case \"valid\":\n      if (cachedValue) {\n        cachedValue.push({\n          value,\n          valid: config.validator()\n        });\n      } else {\n        cachedValue = [{\n          value,\n          valid: config.validator()\n        }];\n        cache.set(arg, cachedValue);\n      }\n\n  }\n}\n\nclass CacheConfigurator {\n  constructor(data) {\n    this._active = true;\n    this._never = false;\n    this._forever = false;\n    this._invalidate = false;\n    this._configured = false;\n    this._pairs = [];\n    this._data = void 0;\n    this._data = data;\n  }\n\n  simple() {\n    return makeSimpleConfigurator(this);\n  }\n\n  mode() {\n    if (this._never) return \"never\";\n    if (this._forever) return \"forever\";\n    if (this._invalidate) return \"invalidate\";\n    return \"valid\";\n  }\n\n  forever() {\n    if (!this._active) {\n      throw new Error(\"Cannot change caching after evaluation has completed.\");\n    }\n\n    if (this._never) {\n      throw new Error(\"Caching has already been configured with .never()\");\n    }\n\n    this._forever = true;\n    this._configured = true;\n  }\n\n  never() {\n    if (!this._active) {\n      throw new Error(\"Cannot change caching after evaluation has completed.\");\n    }\n\n    if (this._forever) {\n      throw new Error(\"Caching has already been configured with .forever()\");\n    }\n\n    this._never = true;\n    this._configured = true;\n  }\n\n  using(handler) {\n    if (!this._active) {\n      throw new Error(\"Cannot change caching after evaluation has completed.\");\n    }\n\n    if (this._never || this._forever) {\n      throw new Error(\"Caching has already been configured with .never or .forever()\");\n    }\n\n    this._configured = true;\n    const key = handler(this._data);\n    const fn = (0, _async.maybeAsync)(handler, `You appear to be using an async cache handler, but Babel has been called synchronously`);\n\n    if ((0, _async.isThenable)(key)) {\n      return key.then(key => {\n        this._pairs.push([key, fn]);\n\n        return key;\n      });\n    }\n\n    this._pairs.push([key, fn]);\n\n    return key;\n  }\n\n  invalidate(handler) {\n    this._invalidate = true;\n    return this.using(handler);\n  }\n\n  validator() {\n    const pairs = this._pairs;\n    return function* (data) {\n      for (const [key, fn] of pairs) {\n        if (key !== (yield* fn(data))) return false;\n      }\n\n      return true;\n    };\n  }\n\n  deactivate() {\n    this._active = false;\n  }\n\n  configured() {\n    return this._configured;\n  }\n\n}\n\nfunction makeSimpleConfigurator(cache) {\n  function cacheFn(val) {\n    if (typeof val === \"boolean\") {\n      if (val) cache.forever();else cache.never();\n      return;\n    }\n\n    return cache.using(() => assertSimpleType(val()));\n  }\n\n  cacheFn.forever = () => cache.forever();\n\n  cacheFn.never = () => cache.never();\n\n  cacheFn.using = cb => cache.using(() => assertSimpleType(cb()));\n\n  cacheFn.invalidate = cb => cache.invalidate(() => assertSimpleType(cb()));\n\n  return cacheFn;\n}\n\nfunction assertSimpleType(value) {\n  if ((0, _async.isThenable)(value)) {\n    throw new Error(`You appear to be using an async cache handler, ` + `which your current version of Babel does not support. ` + `We may add support for this in the future, ` + `but if you're on the most recent version of @babel/core and still ` + `seeing this error, then you'll need to synchronously handle your caching logic.`);\n  }\n\n  if (value != null && typeof value !== \"string\" && typeof value !== \"boolean\" && typeof value !== \"number\") {\n    throw new Error(\"Cache keys must be either string, boolean, number, null, or undefined.\");\n  }\n\n  return value;\n}\n\nclass Lock {\n  constructor() {\n    this.released = false;\n    this.promise = void 0;\n    this._resolve = void 0;\n    this.promise = new Promise(resolve => {\n      this._resolve = resolve;\n    });\n  }\n\n  release(value) {\n    this.released = true;\n\n    this._resolve(value);\n  }\n\n}"],"file":"caching.js"}