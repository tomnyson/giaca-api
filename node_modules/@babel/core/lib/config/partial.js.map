{"version":3,"sources":["../../../../../../node_modules/@babel/core/lib/config/partial.js"],"names":["Object","value","exports","data","require","_path","_gensync","_plugin","_util","_item","_configChain","_environment","_options","_files","_resolveTargets","_excluded","source","target","sourceKeys","i","key","excluded","upwardRootDir","code","dirname","rootDir","inputOpts","Array","args","envName","cwd","root","rootMode","cloneInputAst","absoluteCwd","absoluteRootDir","resolveRootMode","filename","showConfigPath","context","showConfig","configChain","merged","assumptions","opts","options","targets","babelrc","configFile","browserslistConfigFile","passPerPreset","plugins","descriptor","presets","fileHandling","ignore","config","files","loadPartialConfig","showIgnoredFiles","_opts","_objectWithoutPropertiesLoose","result","loadPrivatePartialConfig","item","constructor","hasFilesystemConfig","PartialConfig"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = loadPrivatePartialConfig;\nexports.loadPartialConfig = void 0;\n\nfunction _path() {\n  const data = require(\"path\");\n\n  _path = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _gensync() {\n  const data = require(\"gensync\");\n\n  _gensync = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _plugin = require(\"./plugin\");\n\nvar _util = require(\"./util\");\n\nvar _item = require(\"./item\");\n\nvar _configChain = require(\"./config-chain\");\n\nvar _environment = require(\"./helpers/environment\");\n\nvar _options = require(\"./validation/options\");\n\nvar _files = require(\"./files\");\n\nvar _resolveTargets = require(\"./resolve-targets\");\n\nconst _excluded = [\"showIgnoredFiles\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction resolveRootMode(rootDir, rootMode) {\n  switch (rootMode) {\n    case \"root\":\n      return rootDir;\n\n    case \"upward-optional\":\n      {\n        const upwardRootDir = (0, _files.findConfigUpwards)(rootDir);\n        return upwardRootDir === null ? rootDir : upwardRootDir;\n      }\n\n    case \"upward\":\n      {\n        const upwardRootDir = (0, _files.findConfigUpwards)(rootDir);\n        if (upwardRootDir !== null) return upwardRootDir;\n        throw Object.assign(new Error(`Babel was run with rootMode:\"upward\" but a root could not ` + `be found when searching upward from \"${rootDir}\".\\n` + `One of the following config files must be in the directory tree: ` + `\"${_files.ROOT_CONFIG_FILENAMES.join(\", \")}\".`), {\n          code: \"BABEL_ROOT_NOT_FOUND\",\n          dirname: rootDir\n        });\n      }\n\n    default:\n      throw new Error(`Assertion failure - unknown rootMode value.`);\n  }\n}\n\nfunction* loadPrivatePartialConfig(inputOpts) {\n  if (inputOpts != null && (typeof inputOpts !== \"object\" || Array.isArray(inputOpts))) {\n    throw new Error(\"Babel options must be an object, null, or undefined\");\n  }\n\n  const args = inputOpts ? (0, _options.validate)(\"arguments\", inputOpts) : {};\n  const {\n    envName = (0, _environment.getEnv)(),\n    cwd = \".\",\n    root: rootDir = \".\",\n    rootMode = \"root\",\n    caller,\n    cloneInputAst = true\n  } = args;\n\n  const absoluteCwd = _path().resolve(cwd);\n\n  const absoluteRootDir = resolveRootMode(_path().resolve(absoluteCwd, rootDir), rootMode);\n  const filename = typeof args.filename === \"string\" ? _path().resolve(cwd, args.filename) : undefined;\n  const showConfigPath = yield* (0, _files.resolveShowConfigPath)(absoluteCwd);\n  const context = {\n    filename,\n    cwd: absoluteCwd,\n    root: absoluteRootDir,\n    envName,\n    caller,\n    showConfig: showConfigPath === filename\n  };\n  const configChain = yield* (0, _configChain.buildRootChain)(args, context);\n  if (!configChain) return null;\n  const merged = {\n    assumptions: {}\n  };\n  configChain.options.forEach(opts => {\n    (0, _util.mergeOptions)(merged, opts);\n  });\n  const options = Object.assign({}, merged, {\n    targets: (0, _resolveTargets.resolveTargets)(merged, absoluteRootDir),\n    cloneInputAst,\n    babelrc: false,\n    configFile: false,\n    browserslistConfigFile: false,\n    passPerPreset: false,\n    envName: context.envName,\n    cwd: context.cwd,\n    root: context.root,\n    rootMode: \"root\",\n    filename: typeof context.filename === \"string\" ? context.filename : undefined,\n    plugins: configChain.plugins.map(descriptor => (0, _item.createItemFromDescriptor)(descriptor)),\n    presets: configChain.presets.map(descriptor => (0, _item.createItemFromDescriptor)(descriptor))\n  });\n  return {\n    options,\n    context,\n    fileHandling: configChain.fileHandling,\n    ignore: configChain.ignore,\n    babelrc: configChain.babelrc,\n    config: configChain.config,\n    files: configChain.files\n  };\n}\n\nconst loadPartialConfig = _gensync()(function* (opts) {\n  let showIgnoredFiles = false;\n\n  if (typeof opts === \"object\" && opts !== null && !Array.isArray(opts)) {\n    var _opts = opts;\n    ({\n      showIgnoredFiles\n    } = _opts);\n    opts = _objectWithoutPropertiesLoose(_opts, _excluded);\n    _opts;\n  }\n\n  const result = yield* loadPrivatePartialConfig(opts);\n  if (!result) return null;\n  const {\n    options,\n    babelrc,\n    ignore,\n    config,\n    fileHandling,\n    files\n  } = result;\n\n  if (fileHandling === \"ignored\" && !showIgnoredFiles) {\n    return null;\n  }\n\n  (options.plugins || []).forEach(item => {\n    if (item.value instanceof _plugin.default) {\n      throw new Error(\"Passing cached plugin instances is not supported in \" + \"babel.loadPartialConfig()\");\n    }\n  });\n  return new PartialConfig(options, babelrc ? babelrc.filepath : undefined, ignore ? ignore.filepath : undefined, config ? config.filepath : undefined, fileHandling, files);\n});\n\nexports.loadPartialConfig = loadPartialConfig;\n\nclass PartialConfig {\n  constructor(options, babelrc, ignore, config, fileHandling, files) {\n    this.options = void 0;\n    this.babelrc = void 0;\n    this.babelignore = void 0;\n    this.config = void 0;\n    this.fileHandling = void 0;\n    this.files = void 0;\n    this.options = options;\n    this.babelignore = ignore;\n    this.babelrc = babelrc;\n    this.config = config;\n    this.fileHandling = fileHandling;\n    this.files = files;\n    Object.freeze(this);\n  }\n\n  hasFilesystemConfig() {\n    return this.babelrc !== undefined || this.config !== undefined;\n  }\n\n}\n\nObject.freeze(PartialConfig.prototype);"],"file":"partial.js"}