{"version":3,"sources":["../../../../../../node_modules/@babel/core/lib/transformation/index.js"],"names":["Object","value","exports","data","require","_traverse","_pluginPass","_blockHoistPlugin","_normalizeOpts","_normalizeFile","_generate","file","config","opts","transformFile","e","_opts$filename","outputMap","_opts$filename2","metadata","options","ast","code","outputCode","map","sourceType","passPairs","passes","visitors","pluginPairs","pass","plugin","fn","result","isThenable","visitor","val"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.run = run;\n\nfunction _traverse() {\n  const data = require(\"@babel/traverse\");\n\n  _traverse = function () {\n    return data;\n  };\n\n  return data;\n}\n\nvar _pluginPass = require(\"./plugin-pass\");\n\nvar _blockHoistPlugin = require(\"./block-hoist-plugin\");\n\nvar _normalizeOpts = require(\"./normalize-opts\");\n\nvar _normalizeFile = require(\"./normalize-file\");\n\nvar _generate = require(\"./file/generate\");\n\nfunction* run(config, code, ast) {\n  const file = yield* (0, _normalizeFile.default)(config.passes, (0, _normalizeOpts.default)(config), code, ast);\n  const opts = file.opts;\n\n  try {\n    yield* transformFile(file, config.passes);\n  } catch (e) {\n    var _opts$filename;\n\n    e.message = `${(_opts$filename = opts.filename) != null ? _opts$filename : \"unknown\"}: ${e.message}`;\n\n    if (!e.code) {\n      e.code = \"BABEL_TRANSFORM_ERROR\";\n    }\n\n    throw e;\n  }\n\n  let outputCode, outputMap;\n\n  try {\n    if (opts.code !== false) {\n      ({\n        outputCode,\n        outputMap\n      } = (0, _generate.default)(config.passes, file));\n    }\n  } catch (e) {\n    var _opts$filename2;\n\n    e.message = `${(_opts$filename2 = opts.filename) != null ? _opts$filename2 : \"unknown\"}: ${e.message}`;\n\n    if (!e.code) {\n      e.code = \"BABEL_GENERATE_ERROR\";\n    }\n\n    throw e;\n  }\n\n  return {\n    metadata: file.metadata,\n    options: opts,\n    ast: opts.ast === true ? file.ast : null,\n    code: outputCode === undefined ? null : outputCode,\n    map: outputMap === undefined ? null : outputMap,\n    sourceType: file.ast.program.sourceType\n  };\n}\n\nfunction* transformFile(file, pluginPasses) {\n  for (const pluginPairs of pluginPasses) {\n    const passPairs = [];\n    const passes = [];\n    const visitors = [];\n\n    for (const plugin of pluginPairs.concat([(0, _blockHoistPlugin.default)()])) {\n      const pass = new _pluginPass.default(file, plugin.key, plugin.options);\n      passPairs.push([plugin, pass]);\n      passes.push(pass);\n      visitors.push(plugin.visitor);\n    }\n\n    for (const [plugin, pass] of passPairs) {\n      const fn = plugin.pre;\n\n      if (fn) {\n        const result = fn.call(pass, file);\n        yield* [];\n\n        if (isThenable(result)) {\n          throw new Error(`You appear to be using an plugin with an async .pre, ` + `which your current version of Babel does not support. ` + `If you're using a published plugin, you may need to upgrade ` + `your @babel/core version.`);\n        }\n      }\n    }\n\n    const visitor = _traverse().default.visitors.merge(visitors, passes, file.opts.wrapPluginVisitorMethod);\n\n    (0, _traverse().default)(file.ast, visitor, file.scope);\n\n    for (const [plugin, pass] of passPairs) {\n      const fn = plugin.post;\n\n      if (fn) {\n        const result = fn.call(pass, file);\n        yield* [];\n\n        if (isThenable(result)) {\n          throw new Error(`You appear to be using an plugin with an async .post, ` + `which your current version of Babel does not support. ` + `If you're using a published plugin, you may need to upgrade ` + `your @babel/core version.`);\n        }\n      }\n    }\n  }\n}\n\nfunction isThenable(val) {\n  return !!val && (typeof val === \"object\" || typeof val === \"function\") && !!val.then && typeof val.then === \"function\";\n}"],"file":"index.js"}