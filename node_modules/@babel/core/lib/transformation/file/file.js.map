{"version":3,"sources":["../../../../../../../node_modules/@babel/core/lib/transformation/file/file.js"],"names":["Object","value","exports","data","require","helpers","_traverse","_codeFrame","_t","_helperModuleTransforms","_semver","interpreterDirective","errorVisitor","enter","loc","path","state","constructor","inputMap","file","getCode","getScope","addHelper","buildError","hub","parentPath","parent","container","key","shebang","interpreter","set","get","has","getModuleName","addImport","availableHelper","minVersion","err","versionRange","declar","cloneNode","generator","res","uid","dependencies","globals","dep","name","nodes","node","addTemplateObject","buildCodeFrameError","_Error","txt","msg","highlightCode","start","line","column","end","undefined"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction helpers() {\n  const data = require(\"@babel/helpers\");\n\n  helpers = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _traverse() {\n  const data = require(\"@babel/traverse\");\n\n  _traverse = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _codeFrame() {\n  const data = require(\"@babel/code-frame\");\n\n  _codeFrame = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _t() {\n  const data = require(\"@babel/types\");\n\n  _t = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _helperModuleTransforms() {\n  const data = require(\"@babel/helper-module-transforms\");\n\n  _helperModuleTransforms = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _semver() {\n  const data = require(\"semver\");\n\n  _semver = function () {\n    return data;\n  };\n\n  return data;\n}\n\nconst {\n  cloneNode,\n  interpreterDirective\n} = _t();\n\nconst errorVisitor = {\n  enter(path, state) {\n    const loc = path.node.loc;\n\n    if (loc) {\n      state.loc = loc;\n      path.stop();\n    }\n  }\n\n};\n\nclass File {\n  constructor(options, {\n    code,\n    ast,\n    inputMap\n  }) {\n    this._map = new Map();\n    this.opts = void 0;\n    this.declarations = {};\n    this.path = null;\n    this.ast = {};\n    this.scope = void 0;\n    this.metadata = {};\n    this.code = \"\";\n    this.inputMap = null;\n    this.hub = {\n      file: this,\n      getCode: () => this.code,\n      getScope: () => this.scope,\n      addHelper: this.addHelper.bind(this),\n      buildError: this.buildCodeFrameError.bind(this)\n    };\n    this.opts = options;\n    this.code = code;\n    this.ast = ast;\n    this.inputMap = inputMap;\n    this.path = _traverse().NodePath.get({\n      hub: this.hub,\n      parentPath: null,\n      parent: this.ast,\n      container: this.ast,\n      key: \"program\"\n    }).setContext();\n    this.scope = this.path.scope;\n  }\n\n  get shebang() {\n    const {\n      interpreter\n    } = this.path.node;\n    return interpreter ? interpreter.value : \"\";\n  }\n\n  set shebang(value) {\n    if (value) {\n      this.path.get(\"interpreter\").replaceWith(interpreterDirective(value));\n    } else {\n      this.path.get(\"interpreter\").remove();\n    }\n  }\n\n  set(key, val) {\n    if (key === \"helpersNamespace\") {\n      throw new Error(\"Babel 7.0.0-beta.56 has dropped support for the 'helpersNamespace' utility.\" + \"If you are using @babel/plugin-external-helpers you will need to use a newer \" + \"version than the one you currently have installed. \" + \"If you have your own implementation, you'll want to explore using 'helperGenerator' \" + \"alongside 'file.availableHelper()'.\");\n    }\n\n    this._map.set(key, val);\n  }\n\n  get(key) {\n    return this._map.get(key);\n  }\n\n  has(key) {\n    return this._map.has(key);\n  }\n\n  getModuleName() {\n    return (0, _helperModuleTransforms().getModuleName)(this.opts, this.opts);\n  }\n\n  addImport() {\n    throw new Error(\"This API has been removed. If you're looking for this \" + \"functionality in Babel 7, you should import the \" + \"'@babel/helper-module-imports' module and use the functions exposed \" + \" from that module, such as 'addNamed' or 'addDefault'.\");\n  }\n\n  availableHelper(name, versionRange) {\n    let minVersion;\n\n    try {\n      minVersion = helpers().minVersion(name);\n    } catch (err) {\n      if (err.code !== \"BABEL_HELPER_UNKNOWN\") throw err;\n      return false;\n    }\n\n    if (typeof versionRange !== \"string\") return true;\n    if (_semver().valid(versionRange)) versionRange = `^${versionRange}`;\n    return !_semver().intersects(`<${minVersion}`, versionRange) && !_semver().intersects(`>=8.0.0`, versionRange);\n  }\n\n  addHelper(name) {\n    const declar = this.declarations[name];\n    if (declar) return cloneNode(declar);\n    const generator = this.get(\"helperGenerator\");\n\n    if (generator) {\n      const res = generator(name);\n      if (res) return res;\n    }\n\n    helpers().ensure(name, File);\n    const uid = this.declarations[name] = this.scope.generateUidIdentifier(name);\n    const dependencies = {};\n\n    for (const dep of helpers().getDependencies(name)) {\n      dependencies[dep] = this.addHelper(dep);\n    }\n\n    const {\n      nodes,\n      globals\n    } = helpers().get(name, dep => dependencies[dep], uid, Object.keys(this.scope.getAllBindings()));\n    globals.forEach(name => {\n      if (this.path.scope.hasBinding(name, true)) {\n        this.path.scope.rename(name);\n      }\n    });\n    nodes.forEach(node => {\n      node._compact = true;\n    });\n    this.path.unshiftContainer(\"body\", nodes);\n    this.path.get(\"body\").forEach(path => {\n      if (nodes.indexOf(path.node) === -1) return;\n      if (path.isVariableDeclaration()) this.scope.registerDeclaration(path);\n    });\n    return uid;\n  }\n\n  addTemplateObject() {\n    throw new Error(\"This function has been moved into the template literal transform itself.\");\n  }\n\n  buildCodeFrameError(node, msg, _Error = SyntaxError) {\n    let loc = node && (node.loc || node._loc);\n\n    if (!loc && node) {\n      const state = {\n        loc: null\n      };\n      (0, _traverse().default)(node, errorVisitor, this.scope, state);\n      loc = state.loc;\n      let txt = \"This is an error on an internal node. Probably an internal error.\";\n      if (loc) txt += \" Location has been estimated.\";\n      msg += ` (${txt})`;\n    }\n\n    if (loc) {\n      const {\n        highlightCode = true\n      } = this.opts;\n      msg += \"\\n\" + (0, _codeFrame().codeFrameColumns)(this.code, {\n        start: {\n          line: loc.start.line,\n          column: loc.start.column + 1\n        },\n        end: loc.end && loc.start.line === loc.end.line ? {\n          line: loc.end.line,\n          column: loc.end.column + 1\n        } : undefined\n      }, {\n        highlightCode\n      });\n    }\n\n    return new _Error(msg);\n  }\n\n}\n\nexports.default = File;"],"file":"file.js"}